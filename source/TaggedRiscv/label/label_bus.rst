.. role:: raw-html-m2r(raw)
   :format: html

总线隔离
============================

经过扩展的总线可以携带CPU或DMA发出的标签信息，并通过APB3的鉴权模块与AXI4的二级地址翻译模块实现总线的标签化隔离。

- **APB3总线隔离**
    + **标签位扩展** ： 对PADDR信号的高3位进行高位扩展作为标签位。
    \

    .. image:: /asset/image/label_bus_1.png
    \

    + **地址空间鉴权** ： 访问权限表记录了不同标签对不同地址的访问权限，在使用总线时根据标签位和访问权限表进行鉴权，不合法的访问将返回SlaveError信号，访问权限表由管理程序通过APB3总线配置。

- **AXI4总线隔离**
    + **标签位扩展** ： 使用各通道的User信号作为标签位。

    \

    + **二级地址翻译** ： 地址映射表记录了不同标签的可访问地址范围，在使用总线时将原始地址根据地址映射表映射到不同标签的地址空间，并对访问范围进行鉴权，不合法的访问将返回resp信号的DecodeError，地址映射表由管理程序通过APB3总线配置。
